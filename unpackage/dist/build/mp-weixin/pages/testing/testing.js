(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/testing/testing"],{"1c39":function(t,e,n){"use strict";n.r(e);var a=n("e937"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e["default"]=i.a},"2ef0":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},"3ed7":function(t,e,n){"use strict";(function(t){n("f103");a(n("66fd"));var e=a(n("ae38"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},ae38:function(t,e,n){"use strict";n.r(e);var a=n("2ef0"),i=n("1c39");for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n("dcff");var o=n("2877"),s=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=s.exports},d89c:function(t,e,n){},dcff:function(t,e,n){"use strict";var a=n("d89c"),i=n.n(a);i.a},e937:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("a34a"));function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return u(t)||s(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0)if(n.push(o.value),e&&n.length===e)break}catch(u){i=!0,r=u}finally{try{a||null==s["return"]||s["return"]()}finally{if(i)throw r}}return n}function u(t){if(Array.isArray(t))return t}function c(t,e,n,a,i,r,o){try{var s=t[r](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(a,i)}function d(t){return function(){var e=this,n=arguments;return new Promise(function(a,i){var r=t.apply(e,n);function o(t){c(r,a,i,o,s,"next",t)}function s(t){c(r,a,i,o,s,"throw",t)}o(void 0)})}}var l=function(){return n.e("components/lu-popup-wrapper/lu-popup-wrapper").then(n.bind(null,"0252"))},f={components:{luPopupWrapper:l},data:function(){return{testing:{},show:!0,isinfo:!0,name:"",phone:"",canvasisShow:!1,posterCode:"",isIphoneX:!1}},methods:{shareposter:function(){t.navigateTo({url:"../sharePoster/sharePoster"})},onHome:function(){t.switchTab({url:"../index/index"})},wxGetUserInfo:function(){var e=d(a.default.mark(function e(n){var i,o,s,u,c,d,l;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.name,o=this.phone,i=i.trim(),o=o.trim(),!i.length||11!=o.length){e.next=27;break}if(t.showLoading({title:"提交中...",mask:!0}),!n.detail.iv&&!n.detail.encryptedData){e.next=25;break}return e.next=8,t.login({provider:"weixin"});case 8:return s=e.sent,u=r(s,2),u[0],c=u[1],e.next=14,this.ajax(this.api.login,{code:c.code,iv:n.detail.iv,encryptedData:n.detail.encryptedData},"POST");case 14:if(d=e.sent,t.hideLoading(),200!=d.data.code){e.next=24;break}return t.setStorageSync("token",d.data.data),e.next=20,this.ajax(this.api.perfectuserinfo,{name:i,phone:o},"POST");case 20:l=e.sent,200==l.data.code&&(t.showToast({title:l.data.msg,duration:2e3,icon:"none"}),this.$refs.userPop.close(),this.isinfo=!1),e.next=25;break;case 24:t.showModal({title:"提示",content:d.data.msg,showCancel:!1});case 25:e.next=28;break;case 27:t.showToast({title:"请输入完整信息",duration:2e3,icon:"none"});case 28:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),getPhoneNumber:function(){var e=d(a.default.mark(function e(n){var i,o,s,u;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n.detail.encryptedData||!n.detail.iv){e.next=12;break}return e.next=3,t.login({provider:"weixin"});case 3:return i=e.sent,o=r(i,2),o[0],s=o[1],e.next=9,this.ajax(this.api.getPhone,{code:s.code,iv:n.detail.iv,encryptedData:n.detail.encryptedData},"POST");case 9:u=e.sent,console.log(u),200==u.data.code&&("null"!=u.data.data?(this.phone=u.data.data,this.show=!1):t.showToast({title:"获取手机号失败,请重试",duration:2e3,icon:"none"}));case 12:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),phoneChange:function(t){console.log(t),t.detail.cursor>0?this.show=!1:this.show=!0},isinfoshow:function(){this.$refs.userPop.show()},address:function(){t.openLocation({latitude:Number(this.testing.latitude),longitude:Number(this.testing.longitude),name:this.testing.testingname})},callphone:function(){t.makePhoneCall({phoneNumber:this.testing.phone})},swiperLink:function(e){t.previewImage({current:e,urls:this.testing.swiper_imgs,longPressActions:{itemList:["发送给朋友","保存图片","收藏"]}})},goPay:function(e){var n="";n=1==e?this.testing.driving_price:this.testing.appointment_price;var a=this.testing.id;t.navigateTo({url:"../testingPay/testingPay?type=".concat(e,"&price=").concat(n,"&testing_id=").concat(a)})}},onLoad:function(){var e=d(a.default.mark(function e(n){var i,r,o;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=getApp().globalData.isIphoneX,this.isIphoneX=i,t.showLoading({title:"加载中...",mask:!0}),getApp().globalData.uid){e.next=10;break}return e.next=6,this.ajax(this.api.isinfo);case 6:r=e.sent,200==r.data.code&&(getApp().globalData.uid=r.data.data,this.isinfo=!1),e.next=11;break;case 10:this.isinfo=!1;case 11:if(!n.id){e.next=17;break}return e.next=14,this.ajax(this.api.testing,{id:n.id},"POST");case 14:o=e.sent,t.hideLoading(),200==o.data.code&&(this.testing=o.data.data,t.setNavigationBarTitle({title:o.data.data.testingname}));case 17:console.log(this.testing);case 18:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}()};e.default=f}).call(this,n("543d")["default"])}},[["3ed7","common/runtime","common/vendor"]]]);