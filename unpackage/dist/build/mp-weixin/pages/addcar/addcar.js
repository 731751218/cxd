(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/addcar/addcar"],{3206:function(e,t,n){"use strict";n.r(t);var i=n("ffd1"),a=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);t["default"]=a.a},"48a0":function(e,t,n){},"714e":function(e,t,n){"use strict";n.r(t);var i=n("cc03"),a=n("3206");for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n("9dd5");var s=n("2877"),u=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,null,null);t["default"]=u.exports},"9dd5":function(e,t,n){"use strict";var i=n("48a0"),a=n.n(i);a.a},a6d8:function(e,t,n){"use strict";(function(e){n("f103");i(n("66fd"));var t=i(n("714e"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},cc03:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},ffd1:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("a34a"));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return c(e)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)if(n.push(s.value),t&&n.length===t)break}catch(c){a=!0,r=c}finally{try{i||null==u["return"]||u["return"]()}finally{if(a)throw r}}return n}function c(e){if(Array.isArray(e))return e}function o(e,t,n,i,a,r,s){try{var u=e[r](s),c=u.value}catch(o){return void n(o)}u.done?t(c):Promise.resolve(c).then(i,a)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var r=e.apply(t,n);function s(e){o(r,i,a,s,u,"next",e)}function u(e){o(r,i,a,s,u,"throw",e)}s(void 0)})}}var d=function(){return n.e("components/license-plate-key").then(n.bind(null,"1f92"))},h={components:{licensePlateKey:d},data:function(){return{carnumber:"",datearr:[],dateind:0,drivinglicensejust:"",drivinglicensejustimg:"",drivinglicensevice:"",drivinglicenseviceimg:"",vin:"",engine_num:"",distinguish:!1,register_date:"",car_inspection_date:"请选择车险有效期",yearly_inspection_date:"请选择年检有效期"}},methods:{lookImg:function(t){var n="";switch(t){case 1:n=this.drivinglicensejustimg;break;case 2:n=this.drivinglicenseviceimg;break}e.previewImage({urls:[n]})},uploadFileJust:function(){var t=l(i.default.mark(function t(){var n,a,s,u,c,o,l,d,h,f,g,p,v,m;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"]});case 2:if(n=t.sent,a=r(n,2),s=a[0],u=a[1],s){t.next=25;break}return this.drivinglicensejustimg=u.tempFilePaths[0],t.next=10,e.uploadFile({url:this.api.uplode_img,filePath:u.tempFilePaths[0],name:"img"});case 10:if(c=t.sent,o=r(c,2),l=o[0],d=o[1],l){t.next=24;break}return this.distinguish=!0,h=JSON.parse(d.data),this.drivinglicensejust=h.url,t.next=20,this.ajax(this.api.distinguish,{img:h.url},"POST");case 20:f=t.sent,200==f.data.code?(g=f.data.data,p=g.register_date,v=g.engine_num,m=g.vin,this.distinguish=!0,this.vin=m,this.engine_num=v,this.register_date=p):e.showToast({title:"智能识别失败",duration:2e3,icon:"none"}),t.next=25;break;case 24:e.showToast({title:"上传失败",duration:2e3,icon:"none"});case 25:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),uploadFileVice:function(){var t=l(i.default.mark(function t(){var n,a,s,u,c,o,l,d,h,f;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"]});case 2:if(n=t.sent,a=r(n,2),s=a[0],u=a[1],s){t.next=24;break}return this.drivinglicenseviceimg=u.tempFilePaths[0],t.next=10,e.uploadFile({url:this.api.uplode_img,filePath:u.tempFilePaths[0],name:"img"});case 10:if(c=t.sent,o=r(c,2),l=o[0],d=o[1],l){t.next=23;break}return h=JSON.parse(d.data),this.drivinglicensevice=h.url,t.next=19,this.ajax(this.api.distinguish,{img:h.url},"POST");case 19:f=t.sent,200==f.data.code||e.showToast({title:"智能识别失败",duration:2e3,icon:"none"}),t.next=24;break;case 23:e.showToast({title:"上传失败",duration:2e3,icon:"none"});case 24:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),deleteimg:function(e){switch(e){case 1:this.drivinglicensejust="",this.drivinglicensejustimg="";break;case 2:this.drivinglicensevice="",this.drivinglicenseviceimg="";break;case 3:this.insurance="",this.insuranceimg="";break}},previewPictures:function(t){var n="";switch(t){case 1:n=getApp().globalData.example.driving_license_just;break;case 2:n=getApp().globalData.example.driving_license_vice;break}e.previewImage({urls:[n]})},registerDateChange:function(e){console.log(e.detail.value),this.register_date=e.detail.value},yearlyInspectionDateChange:function(e){this.yearly_inspection_date=e.detail.value},carInspectionDateChange:function(e){this.car_inspection_date=e.detail.value},sub:function(){var t=l(i.default.mark(function t(){var n,a,r,s,u,c,o,l,d;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.$refs.licensePlateKey.toBind(),console.log(n),n){t.next=4;break}return t.abrupt("return",e.showToast({title:"请填写完整车牌号",duration:2e3,icon:"none"}));case 4:if(a=this.drivinglicensejust,r=this.drivinglicensevice,s=this.vin,u=this.engine_num,c=this.register_date,o=this.car_inspection_date,l=this.yearly_inspection_date,a.length){t.next=9;break}return t.abrupt("return",e.showToast({title:"请上传正确的行驶证正面",duration:2e3,icon:"none"}));case 9:if(r.length){t.next=13;break}return t.abrupt("return",e.showToast({title:"请上传正确的行驶证副面",duration:2e3,icon:"none"}));case 13:if(s.length){t.next=17;break}return t.abrupt("return",e.showToast({title:"请添加车辆VIN",duration:2e3,icon:"none"}));case 17:if(u.length){t.next=21;break}return t.abrupt("return",e.showToast({title:"请添加车辆发动机编号",duration:2e3,icon:"none"}));case 21:if(c.length){t.next=25;break}return t.abrupt("return",e.showToast({title:"请选择车辆注册日期",duration:2e3,icon:"none"}));case 25:if(o.length){t.next=29;break}return t.abrupt("return",e.showToast({title:"请选择车险有效期",duration:2e3,icon:"none"}));case 29:if(l.length){t.next=31;break}return t.abrupt("return",e.showToast({title:"请选择年险有效期",duration:2e3,icon:"none"}));case 31:return e.showLoading({title:"加载中",mask:!0}),t.next=34,this.ajax(this.api.addCar,{drivinglicensejust:a,drivinglicensevice:r,vin:s,engine_num:u,register_date:c,car_inspection_date:o,yearly_inspection_date:l,carnumber:n},"POST");case 34:d=t.sent,d.data.code&&(e.hideLoading(),e.showToast({title:d.data.msg,duration:2e3,icon:"none"}),200==d.data.code&&e.navigateBack({delta:1}));case 36:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()}};t.default=h}).call(this,n("543d")["default"])}},[["a6d8","common/runtime","common/vendor"]]]);